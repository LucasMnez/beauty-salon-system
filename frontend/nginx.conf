server {
  listen 80;
  server_name _;

  root /usr/share/nginx/html;
  index index.html;

  # Assets e arquivos estÃ¡ticos (cache)
  location /assets/ {
    try_files $uri =404;
    expires 30d;
    add_header Cache-Control "public, max-age=2592000";
  }

  location ~* \.(css|js|svg|png|jpg|jpeg|webp|gif|ico)$ {
    try_files $uri =404;
    expires 7d;
    add_header Cache-Control "public, max-age=604800";
  }

  # Home
  location = / { try_files /index.html =404; }
  location = /index { return 301 /; }
  location = /index.html { return 301 /; }

  # Rotas "bonitas" -> HTML
  location = /agendar { try_files /agendamento.html =404; }
  location = /servicos { try_files /servicos.html =404; }
  location = /sobre-nos { try_files /sobrenos.html =404; }
  location = /contato { try_files /contato.html =404; }
  location = /login { try_files /login.html =404; }
  location = /admin { try_files /admin.html =404; }
  location = /configuracoes { try_files /config.html =404; }
  location = /financeiro { try_files /financeiro.html =404; }

  # Redireciona acesso direto ao .html -> rota bonita
  location = /agendamento.html { return 301 /agendar; }
  location = /sobrenos.html    { return 301 /sobre-nos; }
  location = /servicos.html    { return 301 /servicos; }
  location = /contato.html     { return 301 /contato; }
  location = /login.html       { return 301 /login; }
  location = /admin.html       { return 301 /admin; }
  location = /config.html      { return 301 /configuracoes; }
  location = /financeiro.html  { return 301 /financeiro; }

  # Remove barra final (opcional)
  location = /agendar/    { return 301 /agendar; }
  location = /servicos/   { return 301 /servicos; }
  location = /sobre-nos/  { return 301 /sobre-nos; }
  location = /contato/    { return 301 /contato; }
}
